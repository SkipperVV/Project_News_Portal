{% extends 'flatpages/default.html' %}
{% load i18n %} 
{% load censor_filter %}
{% load filter %}
{% block title %} Posts {% endblock title %}

{% block content %}

<h3>{{ string }} {% trans "Поиск публикаций. Выберите пост из списка внизу или введите критерии поиска." %}
<br><br>
<a href="/news">{{ string }} {% trans "На главную" %} &#128073;</a>
</h3>
<br>

<form method="GET">
    {{ filter.form }}
    <input type="submit" value="Найти">

</form>

<br><br>
{% if filter.qs %}
<table>
    <tr align="left">
        <th> {{ string }} {% trans "Автор:" %}</th>
        <th> {{ string }} {% trans "Заголовок:" %}</th>
        <th> {{ string }} {% trans "Краткое содержание:" %}</th>
        <!-- <th> category:</th> -->
        <th> {{ string }} {% trans "Дата публикации:" %}</th>
        <th> {{ string }} {% trans "Рэйтинг:" %}</th>

        {% for item in filter.qs %}


    <tr>
        <td>  <a href="{% url 'posts' item.id %}">{{ item.author }}</a> </td>
        <td width="300">{{item.title|censor|truncatewords:5}}</td>
        <td width="500">{{item.text|censor|truncatewords:5}}</td>
        <!-- <td>
            {% for cat in item.category.all %}
                {{ cat.name }}
            {% endfor %}
        </td> -->
        <td width="200">{{item.post_time}}</td>
        <td width="50" align="center">{{item.rating}}</td>
    </tr>
    {% endfor %}

    {% else %}

    <h2 style="text-align:center"> {{ string }} {% trans "По этим критериям поиска ничего не найдено" %} &#128580;</h2>

    {% endif %}
</table>

{% endblock content %}

